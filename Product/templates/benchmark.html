{% extends "base.html" %}

{% block title %}Pressure Tracker &middot; Benchmark{% endblock %}

{% block style %}
{%endblock %}

{% block content %}
<div class="container">
	<div class="row my-5">
		<div class="col-12">
			<h2>{{ data.title }}</h2>
		</div>
	</div>
	<div class="row my-5">
		<div class="col-6">
			<!-- Left column (wide) start -->
			<div class="card mx-auto">
				<h5 class="card-header text-white bg=class= custom-gradient1">Results Morning</h5>
				<div class="card-body">
					{% if data.results_d %}
					<table class="table">
						<thead class="thead-light">
							<tr>
								<th>Systolic</th>
								<th>Diastolic</th>
								<th>Time</th>
								<th>Date</th>
								<th></th>
							</tr>
						</thead>
						<tbody>
							{% for item in data.results_d %}
							<tr>
								<td>{{ item.systolic }}</td>
								<td>{{ item.diastolic }}</td>
								<td>{{item.daytime}}</td>
								<td>{{ item.date.strftime('%d. %m. %Y') }}</td>
								<td>
									<a href="/result/edit/{{ item.id }}"><i class="fa-solid fa-pencil"></i></a>
									<a href="/result/delete/{{ item.id }}" class="text-danger"><i
											class="fa-solid fa-trash"></i></a>
								</td>
							</tr>
							{% endfor %}
						</tbody>
					</table>
					{% else %}
					<div>No results to display.</div>
					{% endif %}
					<div>
						<a href="/result/add"><i class="fa-solid fa-plus"></i>New result</a>
					</div>
				</div>
				
			</div>
			<div class="card mx-auto">
				<h5 class="card-header text-white bg=class= custom-gradient1">Results Night</h5>
				<div class="card-body">
					{% if data.results_n %}
					<table class="table">
						<thead class="thead-light">
							<tr>
								<th>Systolic</th>
								<th>Diastolic</th>
								<th>Time</th>
								<th>Date</th>
								<th></th>
							</tr>
						</thead>
						<tbody>
							{% for item in data.results_n %}
							<tr>
								<td>{{ item.systolic }}</td>
								<td>{{ item.diastolic }}</td>
								<td>{{item.daytime}}</td>
								<td>{{ item.date.strftime('%d. %m. %Y') }}</td>
								<td>
									<a href="/result/edit/{{ item.id }}"><i class="fa-solid fa-pencil"></i></a>
									<a href="/result/delete/{{ item.id }}" class="text-danger"><i
											class="fa-solid fa-trash"></i></a>
								</td>
							</tr>
							{% endfor %}
						</tbody>
					</table>
					{% else %}
					<div>No results to display.</div>
					{% endif %}
					<div>
						<a href="/result/add"><i class="fa-solid fa-plus"></i>New result</a>
					</div>
				</div>
				
			</div>
			<!-- Left column (wide) end -->
		</div>
		<div class="col-6">

			<div class="card mx-auto">
				<h5 class="card-header text-white bg=class= custom-gradient1">Blood pressure range</h5>
				<div class="card-body">
					<img class="d-block w-100" src="{{ url_for('static', filename='pictures/nice4.jpg') }}"
						alt="blood pressure range graph">



					<!-- BMI labels go here -->
				</div>
			</div>

			<div class="card my-4 mx-auto">
				<h5 class="card-header text-white bg=class= custom-gradient1">Your blood pressure over time (Morning)</h5> <!--title for the graph-->
				<div class="card-body">
					<canvas id="myChart" width="400" height="180"></canvas>
				</div>
				<h5 class="card-header text-white bg=class= custom-gradient1">Your blood pressure over time (Night)</h5> 
				<div class="card-body">
					<canvas id="myChart2" width="400" height="180"></canvas>
				</div>
			</div>
		</div>
	</div>
</div>
{% endblock %}

{% block javascript %}
<script>
	let ctxL = document.getElementById("myChart").getContext('2d');
	let myLineChart = new Chart(ctxL, {
		type: 'line',
		data: {
			labels: {{ data.labels_d | safe }},
	        datasets: [
			  {
		        label: 'Systolic',
		        data: {{ data.data_s_d | safe }},
				fill: false,
				borderColor: 'rgb(255,128,0)'
			  },
			  {
		        label: 'Diastolic',
		        data: {{ data.data_d_d | safe }},
				fill: false,
				borderColor: 'rgb(0,128,255)'
			  }
			]
		}
	});
	let ctxL2 = document.getElementById("myChart2").getContext('2d');
	let myLineChart2 = new Chart(ctxL2, {
		type: 'line',
		data: {
			labels: {{ data.labels_n | safe }},
	        datasets: [
			  {
		        label: 'Systolic',
		        data: {{ data.data_s_n | safe }},
				fill: false,
				borderColor: 'rgb(255,128,0)'
			  },
			  {
		        label: 'Diastolic',
		        data: {{ data.data_d_n | safe }},
				fill: false,
				borderColor: 'rgb(0,128,255)'
			  }
			]
		}
	});
</script>

{% endblock %}