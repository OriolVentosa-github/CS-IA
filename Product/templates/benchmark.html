{% extends "base.html" %}

{% block title %}Pressure Tracker &middot; Benchmark{% endblock %}

{% block style %}
{%endblock %}

{% block content %}
<div class="container">
	<div class="row my-5">
		<div class="col-12">
			<h2>{{ data.title }}</h2>
		</div>
	</div>
	<div class="row my-5">
		<div class="col-6">
			<!-- Left column (wide) start -->
			<div class="card mx-auto">
				<h5 class="card-header text-white bg=class= custom-gradient1">Results</h5>
				<div class="card-body">
					{% if data.results %}
					<table class="table">
						<thead class="thead-light">
							<tr>
								<th>Systolic</th>
								<th>Diastolic</th>
								<th>Time</th>
								<th>Date</th>
								<th></th>
							</tr>
						</thead>
						<tbody>
							{% for item in data.results %}
							<tr>
								<td>{{ item.systolic }}</td>
								<td>{{ item.diastolic }}</td>
								<td>{{item.daytime}}</td>
								<td>{{ item.date.strftime('%d. %m. %Y') }}</td>
								<td>
									<a href="/result/edit/{{ item.id }}"><i class="fa-solid fa-pencil"></i></a>
									<a href="/result/delete/{{ item.id }}" class="text-danger"><i
											class="fa-solid fa-trash"></i></a>
								</td>
							</tr>
							{% endfor %}
						</tbody>
					</table>
					{% else %}
					<div>No results to display.</div>
					{% endif %}
					<div>
						<a href="/result/add"><i class="fa-solid fa-plus"></i>New result</a>
					</div>
				</div>
			</div>
			<!-- Left column (wide) end -->
		</div>
		<div class="col-6">

			<div class="card mx-auto">
				<h5 class="card-header text-white bg=class= custom-gradient1">Blood pressure range</h5>
				<div class="card-body">
					<img class="d-block w-100" src="{{ url_for('static', filename='pictures/nice4.jpg') }}"
						alt="blood pressure range graph">



					<!-- BMI labels go here -->
				</div>
			</div>

			<div class="card my-4 mx-auto">
				<h5 class="card-header text-white bg=class= custom-gradient1">Your blood pressure over time 'date'</h5>
				<div class="card-body">
					<canvas id="myChart" width="400" height="180"></canvas>
				</div>
			</div>
		</div>
	</div>
</div>
{% endblock %}

{% block javascript %}
<script>
	var ctxL = document.getElementById("myChart").getContext('2d');
	var myLineChart = new Chart(ctxL, {
		type: 'line',
		data: {
			labels: {{ data.labels | safe }},
	datasets: [{
		label: 'Systolic',
		data: {{ data.data_s | safe }},
		backgroundColor: [
		'rgba(105, 0, 132, .2)',
	],
		borderColor: [
		'rgba(200, 99, 132, .7)',
	],
		borderWidth: 2
			},
	{
		label: 'Diastolic',
		data: {{ data.data_d | safe }},
		backgroundColor: [
		'rgba(0, 137, 132, .2)',
	],
		borderColor: [
		'rgba(0, 10, 130, .7)',
	],
		borderWidth: 2
			}
	]
		},
	options: {
		responsive: true
	}
	});
</script>

{% endblock %}